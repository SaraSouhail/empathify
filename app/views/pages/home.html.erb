<% if user_signed_in? %>

<div class="video-wrapper today-container today-container today-video-container text-center">
  <h3><i class="fa-solid fa-play" style="color: #F9F871;"></i>  Video of today: </h3>
    <a class="video-link ps-4 mb-3" href="https://www.youtube.com/watch?v=7oKjW1OIjuw" target="_blank">
       <center><img class="video-thumbnail" src="https://img.youtube.com/vi/7oKjW1OIjuw/mqdefault.jpg" alt="Video Thumbnail"></center>
        <span class="play-button">&#9658;</span>
    </a>
    <a class="today-video-link ps-4 text-decoration-none"  id="video-link" href="https://www.youtube.com/watch?v=ppSYMGpWgkY" target="_blank"></a>
    <hr>
    <h3><i class="fa-brands fa-readme" style="color: #F9F871;"></i> Article of today: </h3>
    <a class="today-video-link ps-4 text-decoration-none" href="https://www.stopbullying.gov/blog/2021/07/29/preventing-cyberbullying-age-smart-phones" target="_blank"> Preventing Cyberbullying in the Age of Smart Phones</a>
    <hr>
    <h3><i class="fa-solid fa-quote-left" style="color: #F9F871;"></i><i class="fa-solid fa-quote-rigght" style="color: #4385f5;"></i>  Advice of today: </h3>
    <strong><p class="advice">“Courage is fire, and bullying is smoke.”</p></strong>
</div>
<script>
  // Function to extract video ID from URL
function extractVideoId(url) {
  const match = url.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/);
  return match ? match[1] : null;
}

// Function to get video title
async function getVideoTitle(videoId, apiKey) {
  try {
    const response = await fetch(`https://www.googleapis.com/youtube/v3/videos?id=${videoId}&key=${apiKey}&part=snippet`);
    const data = await response.json();
    if (data.items && data.items.length > 0) {
      return data.items[0].snippet.title;
    } else {
      return null;
    }
  } catch (error) {
    console.error('Error:', error);
    return null;
  }
}

// Example usage
const youtubeUrl = "https://www.youtube.com/watch?v=7oKjW1OIjuw";
const apiKey = "AIzaSyDSWrwoxw6A84_Z_xfYPyj5WN4miTtutqA";

const videoId = extractVideoId(youtubeUrl);
if (videoId) {
  getVideoTitle(videoId, apiKey)
    .then(title => {
      if (title) {
        console.log("Video Title:", title);
        document.getElementById("video-link").innerText = title;
      } else {
        console.log("Unable to retrieve video title.");
      }
    })
    .catch(error => console.error('Error:', error));
} else {
  console.log("Invalid YouTube URL.");
}

</script>

<style>
    body {
    background-image: url(<%= asset_path("background_page.png") %>);
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;

  }
</style>
<%end%>
